<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="plant">


    <select id="getCron" resultType="CronVo" parameterType="string">
        SELECT cron_name cronName,mesh_id meshId,scene_id sceneId,item_set itemSet,command,cron FROM t_plant_cron
        WHERE 1=1
        <if test="_parameter!=null and _parameter!=''">
            AND mesh_id=#{_parameter}
        </if>
    </select>

    <delete id="deleteCron" parameterType="list">
        <if test="list != null and list.size()>0">
            DELETE FROM t_cron WHERE mesh_id IN
            <foreach collection="list" index="index" item="id" separator="," open="(" close=")">
                #{id}
            </foreach>
        </if>
    </delete>

    <insert id="insertCron" parameterType="list">
        REPLACE INTO
        t_plant_cron(cron_name,mesh_id,scene_id,item_set,item_count,cron,command,create_time,update_time) VALUES
        <foreach collection="list" item="v" index="index" separator=",">
            (
            #{v.cronName},#{v.meshId},#{v.sceneId},#{v.itemSet},#{v.itemCount},#{v.cron},#{v.command},now(),now()
            )
        </foreach>
    </insert>

</mapper>